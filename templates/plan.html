{% extends "base.html" %}

{% block content %}
    <h2>Your Next Trip Starts Here</h2>

    <div class="plan-container">
      <div class="destination-picker">
        <h3>Where to?</h3>

        <div class="destination-display">
          <button type="button" class="nav-arrow" onclick="prevDestination()">
            <i class="fas fa-arrow-left"></i>
          </button>

          <div class="destination-info">
            <img id="destination-image" src="" alt="Destination Image">
            <p id="selected-destination">Tokyo</p>
          </div>

          <button type="button" class="nav-arrow" onclick="nextDestination()">
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <div class="plan-form">
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <div class="flash-messages">
              {% for message in messages %}
                <p>{{ message }}</p>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <form action="/create_trip" method="POST">
          <div>
            <label for="trip_name">Trip Name</label>
            <input type="text" id="trip_name" name="trip_name" required>
          </div>

          <div>
            <label for="origin">Departure</label>
            <input type="text" id="origin" name="origin" required>
          </div>

          <div>
            <label for="destination_input">Destination</label>
            <input type="text" id="destination_input" name="destination" readonly required>
          </div>

          <div>
            <label for="departure">Departure Date</label>
            <input type="date" id="departure" name="departure" required>
          </div>

          <div>
            <label for="return">Return Date</label>
            <input type="date" id="return" name="return" required>
          </div>

          <div>
            <label for="travelers">Add Travelers</label>
            <input type="text" id="invited_users" name="invited_users" placeholder="e.g. Matthew, Ryan or None" required>
          </div>

          <input type="submit" value="Create Trip">
        </form>
      </div>
    </div>
  </main>

  <script>
    const destinations = [
      { name: "Tokyo, Japan", image: "https://images8.alphacoders.com/501/thumb-1920-501447.jpg" },
      { name: "Osaka, Japan", image: "https://rare-gallery.com/uploads/posts/842702-Osaka-Japan-Houses-Rivers-Bridges-Evening-Marinas.jpg" },
      { name: "New York, USA", image: "https://cdn.wallpapersafari.com/43/5/wJucxa.jpg" },
      { name: "London, UK", image: "https://i.redd.it/5ej9fv3df5ba1.jpg" },
      { name: "Shanghai, China", image: "https://images.unsplash.com/photo-1474181487882-5abf3f0ba6c2?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c2hhbmdoYWl8ZW58MHx8MHx8fDA%3D" },
      { name: "Seoul, South Korea", image: "https://wallpapercat.com/w/full/5/2/a/1426187-3840x2160-desktop-4k-seoul-skyline-wallpaper-photo.jpg" },
      { name: "Paris, France", image: "https://external-preview.redd.it/iaiccNJ4sK2AORHWb_dGkhzUA36TiX1ViXik9USySyI.jpg?auto=webp&s=ccc232f5a7bf083b94fd82d430c5e93995548c8e" },
      { name: "San Francisco, USA", image: "https://wallpapers.com/images/hd/san-francisco-hd-2i11alxz9nrbiu19.jpg" },
      { name: "Hong Kong, China", image: "https://plus.unsplash.com/premium_photo-1661887277173-f996f36b8fb2?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aG9uZyUyMGtvbmd8ZW58MHx8MHx8fDA%3D" }
    ];

    let currentIndex = 0;

    function updatePreview() {
      const current = destinations[currentIndex];
      document.getElementById('selected-destination').innerText = current.name;
      document.getElementById('destination-image').src = current.image;
      document.getElementById('destination_input').value = current.name;
    }

    function nextDestination() {
      currentIndex = (currentIndex + 1) % destinations.length;
      updatePreview();
    }

    function prevDestination() {
      currentIndex = (currentIndex - 1 + destinations.length) % destinations.length;
      updatePreview();
    }

    window.onload = updatePreview;
  </script>
{% endblock %}
